<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="">
    <meta property="og:title" content="COBOL Calendar and Date Functions">
    
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="2012-01-18">
    
    <meta property="og:description" content="">
    <meta property="og:url" content="http://purusothaman.me/cobol-calendar-and-date-functions/">
    <meta property="og:site_name" content="Purusothaman Ramanujam">
    
    <meta name="generator" content="Hugo 0.21" />
    <title>COBOL Calendar and Date Functions &middot; Purusothaman Ramanujam</title>
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="http://purusothaman.me/css/style.css">
    
    <link href="http://purusothaman.me/index.xml" rel="alternate" type="application/rss+xml" title="Purusothaman Ramanujam" />
    
    
    <link rel="icon" href="http://purusothaman.me/favicon.ico" />
    

    
    
</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top visible-xs">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
				<a class="navbar-brand" href="http://purusothaman.me/">Purusothaman Ramanujam</a>
			
		</div>
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				
				
			</ul>
		</div>
	</div>
</nav>
<div class="container-fluid">
	<div class="row">
		<div id="menu" class="hidden-xs col-sm-4 col-md-3">
	<div id="menu-content" class="vertical-align">
		
			<h1 class="text-center"><a href="http://purusothaman.me/">Purusothaman Ramanujam</a></h1>
		
		
		
			<small class="text-center center-block">My Personal Flavour</small>
		
		
		
			<img id="profile-pic" src="http://purusothaman.me//img/avatar.jpg" alt="My Picture" class="img-circle center-block">
		
		<div id="social" class="text-center">
			
				<a href="https://github.com/purus"><i class="fa fa-github fa-2x"></i></a>
			

			<a href="mailto:purushoth.r@gmail.com"><i class="fa fa-envelope-o fa-2x"></i></a>
		</div>
		<div id="links" class="text-center">
			
			
		</div>
	</div>
</div>

		<div id="content" class="col-xs-12 col-sm-8 col-md-9">
			<div class="row">
				<div id="post" class="col-sm-offset-1 col-sm-10 col-md-10 col-lg-8">

<main>
	<header>
		<h1>COBOL Calendar and Date Functions</h1>
	</header>

	<article>
		

<p>You need to know what date is 150 days from today (and this kind of stuff happens more often than you&rsquo;d think)? Convert today to an integer date, add 150 to it and convert it back. No more checking which months you&rsquo;re going through to see if it&rsquo;s a 30 day or 31 day month. No more leap year calculations.</p>

<p><strong>Some sample COBOL Date Example:</strong></p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">01  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">TODAY</span>         <span style="color: #66d9ef">PIC 9(8)</span><span style="color: #f8f8f2">.</span>
<span style="color: #75715e">01  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">FUTURE-DATE</span>   <span style="color: #66d9ef">PIC 9(8)</span><span style="color: #f8f8f2">.</span>
<span style="color: #f8f8f2">....</span>
<span style="color: #75715e">MOVE F</span><span style="color: #f8f8f2">UNCTION</span> <span style="color: #a6e22e">CURRENT-DATE </span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">:</span><span style="color: #ae81ff">8</span><span style="color: #f8f8f2">)</span> <span style="color: #66d9ef">TO</span> <span style="color: #f8f8f2">WS-TODAY.</span>
<span style="color: #75715e">COMPUT</span><span style="color: #f8f8f2">E</span> <span style="color: #f8f8f2">WS-FUTURE-DATE</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">FUNCTION</span> <span style="color: #a6e22e">INTEGER-OF-DATE </span><span style="color: #f8f8f2">(WS-TODAY)</span> <span style="color: #f92672">+</span> <span style="color: #ae81ff">150</span>
</pre></div>


<p>Probably the most useful intrinsic function is <strong>CURRENT-DATE</strong> which is a replacement for ACCEPT DATE and ACCEPT TIME. CURRENT-DATE is Y2K-compliant, having a 4-digit year. This function returns a 20-character alphanumeric field which is laid out as follows:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">01  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">CURRENT-DATE-FIELDS.</span>
<span style="color: #75715e">05  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">CURRENT-DATE.</span>
<span style="color: #75715e">10  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">CURRENT-YEAR</span>    <span style="color: #66d9ef">PIC  9(4)</span><span style="color: #f8f8f2">.</span>
<span style="color: #75715e">10  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">CURRENT-MONTH</span>   <span style="color: #66d9ef">PIC  9(2)</span><span style="color: #f8f8f2">.</span>
<span style="color: #75715e">10  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">CURRENT-DAY</span>     <span style="color: #66d9ef">PIC  9(2)</span><span style="color: #f8f8f2">.</span>
<span style="color: #75715e">05  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">CURRENT-TIME.</span>
<span style="color: #75715e">10  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">CURRENT-HOUR</span>    <span style="color: #66d9ef">PIC  9(2)</span><span style="color: #f8f8f2">.</span>
<span style="color: #75715e">10  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">CURRENT-MINUTE</span>  <span style="color: #66d9ef">PIC  9(2)</span><span style="color: #f8f8f2">.</span>
<span style="color: #75715e">10  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">CURRENT-SECOND</span>  <span style="color: #66d9ef">PIC  9(2)</span><span style="color: #f8f8f2">.</span>
<span style="color: #75715e">10  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">CURRENT-MS</span>      <span style="color: #66d9ef">PIC  9(2)</span><span style="color: #f8f8f2">.</span>
<span style="color: #75715e">05  WS</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">DIFF-FROM-GMT</span>       <span style="color: #66d9ef">PIC S9(4)</span><span style="color: #f8f8f2">.</span>
</pre></div>


<p>So not only can you get the time down to the millisecond, but you can get the difference between your time and Greenwich Mean Time.</p>

<p>The function is used in a MOVE:</p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">MOVE F</span><span style="color: #f8f8f2">UNCTION</span> <span style="color: #a6e22e">CURRENT-DATE</span> <span style="color: #66d9ef">TO</span> <span style="color: #f8f8f2">WS-CURRENT-DATE-FIELDS</span>
</pre></div>
</p>

<p>The other intrinsic date functions deal with converting between either Gregorian dates or Julian dates and an internal Integer format. This Integer format is simply the number of days since some predetermined, fixed date like 1/1/0001. These four conversion functions are:</p>

<h3 id="convert-from-gregorian-to-integer-formats">Convert from Gregorian to Integer formats</h3>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">COMPUT</span><span style="color: #f8f8f2">E</span> <span style="color: #f8f8f2">WS-INTEGER-DATE</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">FUNCTION</span> <span style="color: #a6e22e">INTEGER-OF-DATE </span><span style="color: #f8f8f2">(WS-DATE)</span>
</pre></div>


<h3 id="convert-from-integer-to-gregorian-formats">Convert from Integer to Gregorian formats</h3>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">COMPUT</span><span style="color: #f8f8f2">E</span> <span style="color: #f8f8f2">WS-DATE</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">FUNCTION</span> <span style="color: #a6e22e">DATE-OF-INTEGER </span><span style="color: #f8f8f2">(WS-INT-DATE)</span>
</pre></div>


<h3 id="convert-from-julian-to-integer-formats">Convert from Julian to Integer formats</h3>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">COMPUT</span><span style="color: #f8f8f2">E</span> <span style="color: #f8f8f2">WS-INTEGER-DATE</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">FUNCTION</span> <span style="color: #a6e22e">INTEGER-OF-DAY </span><span style="color: #f8f8f2">(WS-JUL-DATE)</span>
</pre></div>


<h3 id="convert-from-integer-to-julian-formats">Convert from Integer to Julian formats</h3>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">COMPUT</span><span style="color: #f8f8f2">E</span> <span style="color: #f8f8f2">WS-JULIAN-DATE</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">FUNCTION</span> <span style="color: #a6e22e">DAY-OF-INTEGER </span><span style="color: #f8f8f2">(WS-INT-DATE)</span>
</pre></div>


<ul>
<li><p>All Gregorian and Julian dates are expected to have 4-digit years.</p></li>

<li><p>COMPUTE is OK because we&rsquo;re only using integers here.</p></li>
</ul>

<h3 id="how-many-days-between-two-dates">How many days between two dates?</h3>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">COMPUT</span><span style="color: #f8f8f2">E</span> <span style="color: #f8f8f2">WS-DAYS</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">FUNCTION</span> <span style="color: #a6e22e">INTEGER-OF-DATE </span><span style="color: #f8f8f2">(WS-DATE-1)</span> <span style="color: #f92672">-</span> 
<span style="color: #75715e">      </span>                  <span style="color: #66d9ef">FUNCTION</span> <span style="color: #a6e22e">INTEGER-OF-DATE </span><span style="color: #f8f8f2">(WS-DATE-2)</span>
</pre></div>


<h3 id="converting-between-gregorian-and-julian-formats-used-to-be-a-pain-also-now-it-s-easy-as-below">Converting between Gregorian and Julian formats used to be a pain also. Now it&rsquo;s easy as below.</h3>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">COMPUT</span><span style="color: #f8f8f2">E</span> <span style="color: #f8f8f2">WS-DATE</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">FUNCTION</span> <span style="color: #a6e22e">DATE-OF-INTEGER </span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">FUNCTION</span> <span style="color: #a6e22e">INTEGER-OF-DAY </span><span style="color: #f8f8f2">(WS-JULIAN))</span>
</pre></div>


	</article>
</main>

<div id="bottom-nav" class="text-center center-block">
	<a href=" http://purusothaman.me/" class="btn btn-default"><i class="fa fa-home"></i> Home</a>
</div>


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'purusothaman-ramanujam';
    var disqus_identifier = 'http:\/\/purusothaman.me\/cobol-calendar-and-date-functions\/';
    var disqus_title = 'COBOL Calendar and Date Functions';
    var disqus_url = 'http:\/\/purusothaman.me\/cobol-calendar-and-date-functions\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


						</div>
					</div>
				</div>
			</div>
		</div>
  </div>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-42031335-1', 'auto');
    ga('send', 'pageview');
    window.baseURL = "http:\/\/purusothaman.me\/";
  </script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
  
  
  <script src="http://purusothaman.me//js/App.js"></script>
  
</body>
</html>
